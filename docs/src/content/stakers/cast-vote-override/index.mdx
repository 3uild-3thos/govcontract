# Cast Vote Override

Override a validator's vote as a delegator using stake account verification.

## Description

This command allows a delegator to override their validator's vote on a proposal. The CLI fetches snapshot data from the operator API and submits the override vote. You can either let the CLI auto-select the first stake account from your voter summary, or explicitly specify a stake account.

## Arguments

| Name | Type | Required | Default | Description |
|------|------|----------|---------|-------------|
| `--proposal-id` | String | Yes | - | The proposal's ID (PDA) |
| `--for-votes` | u64 | Yes | - | Basis points for 'For' vote (0-10000) |
| `--against-votes` | u64 | Yes | - | Basis points for 'Against' vote (0-10000) |
| `--abstain-votes` | u64 | Yes | - | Basis points for 'Abstain' vote (0-10000) |
| `--stake-account` | String | Yes | - | Stake account pubkey (base58) to use for override |
| `--network` | String | Yes | - | Network for fetching merkle proofs (e.g., `mainnet`, `testnet`) |
| `--staker-keypair` | String | Yes | - | Staker keypair for signing the transaction |
| `--vote-account` | String | Yes | - | Vote account pubkey (base58) for the validator |
| `--operator-api` | String | No | Env var | Operator API endpoint for snapshot data |

## Global Arguments

| Name | Type | Required | Default | Description |
|------|----------|---------|-------------|
| `--rpc-url`, `-r` | String | No | `SVMGOV_RPC` env var | Custom RPC URL |

> Using config: With `~/.svmgov/config.toml`, the RPC URL and `operator-api-url` can be set globally. Only pass `--operator-api` to override the configured default.

## Requirements

- `for_votes + against_votes + abstain_votes` must equal **10,000** (100%)
- Stake account must be owned by the signer
- Stake account must be delegated to the specified validator
- Validator must have voted on the proposal

## Examples

```bash
# With config (recommended)
svmgov cast-vote-override \
  --proposal-id "ABC123..." \
  --for-votes 6000 \
  --against-votes 3000 \
  --abstain-votes 1000 \
  --stake-account "StakeAccountPubkey..." \
  --network mainnet \
  --staker-keypair /path/to/staker_key.json \
  --vote-account "VoteAccountPubkey..."

# Override operator API (explicit override)
svmgov cast-vote-override \
  --proposal-id "ABC123..." \
  --for-votes 7000 \
  --against-votes 2000 \
  --abstain-votes 1000 \
  --stake-account "StakeAccountPubkey..." \
  --network mainnet \
  --staker-keypair /path/to/staker_key.json \
  --vote-account "VoteAccountPubkey..." \
  --operator-api https://api.example.com

# Without config (explicit RPC)
svmgov cast-vote-override \
  --proposal-id "ABC123..." \
  --for-votes 6000 \
  --against-votes 3000 \
  --abstain-votes 1000 \
  --stake-account "StakeAccountPubkey..." \
  --network mainnet \
  --staker-keypair /path/to/staker_key.json \
  --vote-account "VoteAccountPubkey..." \
  --rpc-url https://api.mainnet-beta.solana.com
```

## Related Smart Contract

See [cast_vote_override.rs](https://github.com/3uild-3thos/govcontract/blob/main/contract/programs/govcontract/src/instructions/cast_vote_override.rs) in the smart contract.

